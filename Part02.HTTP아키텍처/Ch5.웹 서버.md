[TOC]



# Part02.HTTP 아키텍처

## Chapter.5 웹 서버

### 서론: 5장의 목표

* 3.1 메시지의 흐름
  * 메시지가 어떻게 흘러가는가?
    * 인바운드 / 아웃바운드
    * 항상 다운스트림 방향
* HTTP 메시지의 세 부분(시작줄, 헤더, 개체 본문)
  * 메시지의 각 부분
* 요청과 응답 메시지의 차이
* 요청 메시지가 지원하는 여러 기능(메서드)들
  * 메서드 상세
* 응답 메시지가 반환하는 여러 상태 코드들
  * 상태코드 상세
* 여러 HTTP 헤더들은 무슨 일을 하는가?
  * 헤더 상세



### 5.1 다채로운 웹 서버

---

* HTTP 메시지
  *  HTTP 애플리케이션 간에 주고받은 데이터의 블록들
* 블록의 구성
  * 텍스트 메타 정보 - 데이터(optional)
* 메시지는 방향성이 존재함
  * 인바운드, 아웃바운드, 업스트림, 다운스트림

#### 5.1.1 웹 서버 구현

* 인바운드와 아웃바운드는 트랜잭션의 방향을 포현하기 위해 사용함
  * 트랜잭션 == 요청 명령 + 응답 결과
* 인바운드
  * From 클라이언트 To 서버
* 아웃바운드
  * From 서버 To 클라이언트

#### 5.1.2 다목적 소프트웨어 웹 서버

* 모든 메시지는 다운스트림으로 흐른다
  * 인바운드 방향(요청)에서 클라이언트에 가까운 프록시는 서버에 가까운 프록시에 대해 업스트림
  * 반대로, 아웃바운드 방향(응답)에서 클라이언트 near 프록시는 서버 near 프록시에 대해 다운스트림
  * 하나의 서버, 프록시, 게이트웨이가 인바운드와 아웃바운드일 때 다운스트림 / 업스트림으로 구분될 수 있음

#### 5.1.3 임베디드 웹 서버

* 모든 메시지는 다운스트림으로 흐른다
  * 인바운드 방향(요청)에서 클라이언트에 가까운 프록시는 서버에 가까운 프록시에 대해 업스트림
  * 반대로, 아웃바운드 방향(응답)에서 클라이언트 near 프록시는 서버 near 프록시에 대해 다운스트림
  * 하나의 서버, 프록시, 게이트웨이가 인바운드와 아웃바운드일 때 다운스트림 / 업스트림으로 구분될 수 있음



### 5.2 간단한 펄 웹 서버

---

* HTTP 메시지

  * 단순한 데이터의 구조화된 블록
  * [시작줄] - [헤더] - [본문,optional]

  | 시작줄 | HTTP /1.0 200 OK         |
  | ------ | ------------------------ |
  | 헤더   | Content-type: text/plain |
  |        | Content-length: 19       |
  |        |                          |
  | 본문   | Hi! I'm a messag         |



### 5.3 진짜 웹 서버가 하는 일

---

* 모든 서버가 모든 메서드를 구현하지 않음
* 메서드는 대부분 제한적으로 이용됨
  * DELETE, PUT의 경우 서버에 저장된 리소스와 관련있기 때문에 제한적으로 수행

### 5.4 단계 1: 클라이언트 커넥션 수락

---

* 모든 서버가 모

#### 5.4.1 새 커넥션 다루기

* HTTP요청의 결과로 서버에 어떤 작용이 없는 메서드를 의미함
  * 작용이 없다
    * HTTP 요청의 결과로 인해 서버에서 일어나는 일은 아무것도 없다는 의미
  * 작용의 예시
    * 온라인 쇼핑의 '구매' -> POST 메서드 요청 -> 서버 내 신용카드로 대금이 청구

#### 5.4.2 클라이언트 호스트 명 식별

* 서버에게 리소스를 달라고 요청

  * 가장 흔히 쓰이는 메서드
  * 안전한 메서드

  ```
  GET / seasonal/index-fall.html HTTP/1.1
  Host: www.joes-hardware.com
  Accept: *
  ```

  

#### 5.4.3 ident를 통해 클라이언트 사용자 알아내기

* 서버에게 리소스의 헤더를 요청

  * GET과 동작 방식은 같음


### 5.5 단계 2: 요청 메시지 수신

---

* 크게 5가지의 상태코드
  * 1xx ~ 5xx

#### 5.5.1 메시지의 내부 표현

* HTTP 1.1에서 도입된 상태코드

  * 


#### 5.5.2 커넥션 입력/출력 처리 아키텍처

* 대체로 요청은 성공한다



### 5.6 단계 3: 요청 처리

---

* 5가지 헤더 종류
  * 일반 헤더: 양쪽 모두가 사용함
    * Date: Tue, 3 Oct 1974 02:16:00 GMT
  * 요청 헤더: 요청 메시지



### 5.7 단계 4: 리소스의 매핑과 접근

---

* 크게 5가지의 상태코드
  * 1xx ~ 5xx

#### 5.7.1 Docroot

* HTTP 1.1에서 도입된 상태코드

  * 

#### 5.7.2 디렉터리 목록

* 대체로 요청은 성공한다



#### 5.7.3 동적 콘텐츠 리소스 매핑

* HTTP 1.1에서 도입된 상태코드

  * 

#### 5.7.4 서버사이드 인클루드(Server-Side Includes, SSI)

* 대체로 요청은 성공한다



#### 5.7.5 접근 제어

* 대체로 요청은 성공한다



### 5.8 단계 5: 응답 만들기

---

* 크게 5가지의 상태코드
  * 1xx ~ 5xx

#### 5.8.1 응답 엔터티

* HTTP 1.1에서 도입된 상태코드

  * 

#### 5.8.2 MIME 유형 결정하기

* 대체로 요청은 성공한다



#### 5.8.3 리다이렉션

* 대체로 요청은 성공한다



### 5.9 단계 6: 응답 보내기

---

* 크게 5가지의 상태코드
  * 1xx ~ 5xx



### 5.10 단계 7: 로깅

---

* 크게 5가지의 상태코드
  * 1xx ~ 5xx

